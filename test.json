{
    "redis_commands": [
        {
            "command": "KEYS",
            "args": ["lead:*"]
        },
        {
            "command": "LRANGE",
            "args": ["leads", 0, -1]
        }

    ],
    "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Mortgage Dashboard</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gray-100\">\n    <div class=\"container mx-auto p-4\">\n        <h1 class=\"text-2xl font-bold mb-4\">Mortgage Dashboard</h1>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {% for lead_id in redis_results['leads'] %}\n                {% set lead_key = 'lead:' + lead_id %}\n                <div class=\"bg-white rounded-lg shadow p-4\">\n                    <a href=\"/leads/{{ lead_id }}\" class=\"text-blue-500 hover:text-blue-700\">\n                        <p class=\"font-semibold\">Lead ID: {{ lead_id }}</p>\n                         {% if lead_key in redis_results['KEYS'] %}\n                            {% set lead_data = redis_results[lead_key] %}\n                        <p>Name: {{ lead_data.First_name }} {{ lead_data.last_name }}</p>\n\n                        {% else%}\n                           {% set lead_key_hgetall = 'lead:' + lead_id %}\n                            {% set lead_data = hgetall(lead_key_hgetall) %}\n                            {% if lead_data %}\n                                <p>Name: {{ lead_data.First_name }} {{ lead_data.last_name }}</p>\n                            {% endif %}\n          
              {% endif %}\n\n                    </a>\n                </div>\n            {% endfor %}\n        </div>\n        <div class=\"mt-4\">\n            <a href=\"/leads/create\" class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">Create New Lead</a>\n        </div>\n    </div>\n</body>\n</html>",
    "context": {
      "hgetall": lambda x: None
    }
}